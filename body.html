<!DOCTYPE html>
<html lang="kn">
<head>
  <meta charset="UTF-8">
  <title>Kannada to Tulu Flashcards</title>
   <!-- Google Fonts: Noto Serif Kannada -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Kannada:wght@400;700&display=swap" rel="stylesheet">
  <style>
    @font-face {
      font-family: 'Mallige';
      src: url('XmlAlieg(mallige)v1.4.ttf') format('truetype');
    }
    body {
    font-family: 'Noto Serif Kannada', serif;
      background: #f9f9f9;
      text-align: center;
      padding: 30px;
    }
    .flashcard-image {
      margin-bottom: 12px;
      min-height: 100px;
      /* Prevent layout shift if images vary in size */
    }
    .flashcard-image img {
  max-width: 200px;
  max-height: 200px;
  width: auto;
  height: auto;
  display: inline-block;
}

    .kannadaWord {
  font-size: 36px;
  margin-bottom: 16px;
  font-family: 'Noto Serif Kannada', serif;
  color: #333;
}

    .options {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 24px;
    }
    .option {
      padding: 10px 20px;
      font-size: 32px;
      font-family: 'Mallige', Arial, sans-serif;
      background: #fff;
      border: 2px solid #ccc;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s, border 0.3s;
      min-width: 140px;
    }
    .option:hover {
      border-color: #000;
    }
    #progress {
      height: 20px;
      width: 80%;
      background: #ccc;
      margin: 30px auto 10px;
      border-radius: 10px;
      overflow: hidden;
    }
    #bar {
      height: 100%;
      width: 0%;
      background: #28a745;
      transition: width 0.4s ease-in-out;
    }
    #scoreText {
      font-size: 20px;
    }
    header {
      text-align: center;
      padding: 20px 10px 10px;
      background-color: #80004d;
      color: white;
    }
    .Tulu-logo {
      width: 120px;
      height: auto;
      margin-bottom: 10px;
    }
    h1 {
      font-size: 36px;
      margin: 0;
    }
    nav {
      background-color: #f2f2f2;
      text-align: center;
      padding: 12px;
    }
    nav a {
      color: #80004d;
      margin: 0 20px;
      text-decoration: none;
      font-weight: bold;
      font-size: 18px;
    }
    .content {
      max-width: 900px;
      margin: auto;
      padding: 30px;
      text-align: justify;
      font-size: 18px;
      color: #333;
      line-height: 1.8;
    }
    footer {
      background-color: #80004d;
      color: white;
      text-align: center;
      padding: 15px;
      margin-top: 40px;
    }
    .option.correct {
      background-color: #90ee90 !important;
      border-color: #28a745 !important;
    }
    .option.wrong {
      background-color: #ffcccb !important;
      border-color: #dc3545 !important;
      color: #900;
    }
  </style>
</head>
<body>
  <header>
    <img src="kundapura.jpg" alt="Tulu-logo" class="Tulu-logo">
    <h1>ತುಳು ಲಿಪಿ ಕಲ್ಪುಲೆ </h1>
  </header>

  <!-- Navigation Bar -->
  <nav>
    <a href="index.html">Tulu Letters</a>
    <a href="tulu-transliterate.html">Kannada Fonts To TuluFonts</a>
    <a href="flashcard.html">Flashcards</a>
    <a href="tuluwords.html">Tulu Words</a>
  </nav>
  <h1>Kannada to Tulu Flashcards (MCQ)</h1>

  <!-- Show image here -->
  <div class="flashcard-image" id="flashcardImage"></div>
  <!-- Show only Kannada word here -->
  <div class="kannadaWord" id="kannadaLetter"></div>
  <!-- Options -->
  <div class="options" id="optionButtons"></div>
  <!-- Progress bar -->
  <div id="progress">
    <div id="bar"></div>
  </div>
  <p id="scoreText">Score: 0 / 0</p>

  <script>
    const mapping = {
      '<img src="ಶರೀರದ ಅಂಗಾಂಗಗಳು.jpg" alt="ಶರೀರದ ಅಂಗಾಂಗಗಳು" class="ಶರೀರದ ಅಂಗಾಂಗಗಳು"><h1>ಶರೀರದ ಅಂಗಾಂಗಗಳು</h1>': 'srIerad AAZAgaeZAgalu',
      '<img src="ತಲೆ.jpg" alt="ತಲೆ" class="ತಲೆ"><h1>ತಲೆ</h1>': 'tor, sor, cor, AAor',
      '<img src="ತಲೆಕೂದಲು.jpg" alt="ತಲೆಕೂದಲು" class="ತಲೆಕೂದಲು"><h1>ತಲೆಕೂದಲು</h1>': 'terkujlAX',
      '<img src="ನೆತ್ತಿ.jpg" alt="ನೆತ್ತಿ" class="ನೆತ್ತಿ"><h1>ನೆತ್ತಿ</h1>': 'pedvu',
      '<img src="ಹಣೆ.jpg" alt="ಹಣೆ" class="ಹಣೆ"><h1>ಹಣೆ</h1>': 'mueNAwa',
      '<img src="ಕಿವಿ.jpg" alt="ಕಿವಿ" class="ಕಿವಿ"><h1>ಕಿವಿ</h1>': 'ekbi',
      '<img src="ಕಿವಿ ತಮ್ಮಟೆ.jpg" alt="ಕಿವಿ ತಮ್ಮಟೆ" class="ಕಿವಿ ತಮ್ಮಟೆ"><h1>ಕಿವಿ ತಮ್ಮಟೆ</h1>': 'ekbitepa',
      '<img src="ಕಣ್ಣು.jpg" alt="ಕಣ್ಣು" class="ಕಣ್ಣು"><h1>ಕಣ್ಣು</h1>': 'kNANAX',
      '<img src="ಕಣ್ಣು ಸೀಮೆ.jpg" alt="ಕಣ್ಣು ಸೀಮೆ" class="ಕಣ್ಣು ಸೀಮೆ"><h1>ಕಣ್ಣು ಸೀಮೆ</h1>': 'kNANAX eAom',
      '<img src="ಕಣ್ಣು ಗೊಂಬೆ.jpg" alt="ಕಣ್ಣು ಗೊಂಬೆ" class="ಕಣ್ಣು ಗೊಂಬೆ"><h1>ಕಣ್ಣು ಗೊಂಬೆ</h1>': 'kNANAX ebaMeb',
      '<img src="ತುಟಿ.jpg" alt="ತುಟಿ" class="ತುಟಿ"><h1>ತುಟಿ</h1>': 'biemAma/ mUnAtAru',
      '<img src="ಗಂಟಲು.jpg" alt="ಗಂಟಲು" class="ಗಂಟಲು"><h1>ಗಂಟಲು</h1>': 'edaeNAw',
      '<img src="ಕಿರು ನಾಲಿಗೆ.jpg" alt="ಕಿರು ನಾಲಿಗೆ" class="ಕಿರು ನಾಲಿಗೆ"><h1>ಕಿರು ನಾಲಿಗೆ</h1>': 'kizAzi nalyi',
      '<img src="ಹಲ್ಲು.jpg" alt="ಹಲ್ಲು" class="ಹಲ್ಲು"><h1>ಹಲ್ಲು</h1>': 'kUli',
      '<img src="ಕಡೆಹಲ್ಲು.jpg" alt="ಕಡೆಹಲ್ಲು" class="ಕಡೆಹಲ್ಲು"><h1>ಕಡೆಹಲ್ಲು</h1>': 'kewMpru',
      '<img src="ಕುತ್ತಿಗೆ, ಕೊರಳು.jpg" alt="ಕುತ್ತಿಗೆ, ಕೊರಳು" class="ಕುತ್ತಿಗೆ, ಕೊರಳು"><h1>ಕುತ್ತಿಗೆ, ಕೊರಳು</h1>': 'ekkAkilAX ,keNAqlAX',
      '<img src="ಬೆನ್ನು.jpg" alt="ಬೆನ್ನು" class="ಬೆನ್ನು"><h1>ಬೆನ್ನು</h1>': 'ebri',
      '<img src="ಹೆಗಲು,ಭುಜ.jpg" alt="ಹೆಗಲು, ಭುಜ" class="ಹೆಗಲು, ಭುಜ"><h1>ಹೆಗಲು, ಭುಜ</h1>': 'pueglAX/ kyApor/ bueja',
      '<img src="ಮೊಣಕೈ.jpg" alt="ಮೊಣಕೈ" class="ಮೊಣಕೈ"><h1>ಮೊಣಕೈ</h1>': 'emarZAgyAX',
      '<img src="ಮುಂಗೈ.jpg" alt="ಮುಂಗೈ" class="ಮುಂಗೈ"><h1>ಮುಂಗೈ</h1>': 'tqAqAXmuZAgyi',
      '<img src="ತೋಳು.jpg" alt="ತೋಳು" class="ತೋಳು"><h1>ತೋಳು</h1>': 'teqAqlAX/ dZAgAX / EtaLAX',
      '<img src="ಬೆರಳು.jpg" alt="ಬೆರಳು" class="ಬೆರಳು"><h1>ಬೆರಳು</h1>': 'bierlAX',
      '<img src="ಹೆಬ್ಬೆರಳು.jpg" alt="ಹೆಬ್ಬೆರಳು" class="ಹೆಬ್ಬೆರಳು"><h1>ಹೆಬ್ಬೆರಳು</h1>': 'ekaMbierlAX',
      '<img src="ತೋರುಬೆರಳು.jpg" alt="ತೋರುಬೆರಳು" class="ತೋರುಬೆರಳು"><h1>ತೋರುಬೆರಳು</h1>': 'suqAqi bierlAX',
      '<img src=" ನಡು ಬೆರಳು.jpg" alt=" ನಡು ಬೆರಳು" class=" ನಡು ಬೆರಳು"><h1> ನಡು ಬೆರಳು</h1>': 'nwu bierlAX',
      '<img src=" ಉಂಗುರ ಬೆರಳು.jpg" alt=" ಉಂಗುರ ಬೆರಳು" class=" ಉಂಗುರ ಬೆರಳು"><h1> ಉಂಗುರ ಬೆರಳು</h1>': 'AuZAgil bierlAX',
      '<img src="ಕಿರು ಬೆರಳು.jpg" alt="ಕಿರು ಬೆರಳು" class="ಕಿರು ಬೆರಳು"><h1>ಕಿರು ಬೆರಳು</h1>': 'kizAzi bierlAX / kinAkAXn bierlAX',
      '<img src="ಎದೆ.jpg" alt="ಎದೆ" class="ಎದೆ"><h1>ಎದೆ</h1>': 'tigoL',
      '<img src="ಮೊಲೆ.jpg" alt="ಮೊಲೆ" class="ಮೊಲೆ"><h1>ಮೊಲೆ</h1>': 'mior',
      '<img src="ಮೊಲೆಕಟ್ಟು.jpg" alt="ಮೊಲೆಕಟ್ಟು" class="ಮೊಲೆಕಟ್ಟು"><h1>ಮೊಲೆಕಟ್ಟು</h1>': 'miorkqAqAX',
      '<img src="ಪಕ್ಕೆ.jpg" alt="ಪಕ್ಕೆ" class="ಪಕ್ಕೆ"><h1>ಪಕ್ಕೆ</h1>': 'AAelAl',
      '<img src="ಪಕ್ಕೆಲುಬು.jpg" alt="ಪಕ್ಕೆಲುಬು" class="ಪಕ್ಕೆಲುಬು"><h1>ಪಕ್ಕೆಲುಬು</h1>': 'bari eAlu',
      '<img src="ಅಸ್ಥಿಪಂಜರ.jpg" alt="ಅಸ್ಥಿಪಂಜರ" class="ಅಸ್ಥಿಪಂಜರ"><h1>ಅಸ್ಥಿಪಂಜರ</h1>': 'eAlAekaeq',
      '<img src="ಹೊಟ್ಟೆ.jpg" alt="ಹೊಟ್ಟೆ" class="ಹೊಟ್ಟೆ"><h1>ಹೊಟ್ಟೆ</h1>': 'bzAji',
      '<img src="ಹೊಕ್ಕಳು.jpg" alt="ಹೊಕ್ಕಳು" class="ಹೊಕ್ಕಳು"><h1>ಹೊಕ್ಕಳು</h1>': 'pUevalu',
      '<img src="ಸೊಂಟದ ಕೀಲು.jpg" alt="ಸೊಂಟದ ಕೀಲು" class="ಸೊಂಟದ ಕೀಲು"><h1>ಸೊಂಟದ ಕೀಲು</h1>': 'mcAcNAwAX',
      '<img src="ಜಠರ.jpg" alt="ಜಠರ" class="ಜಠರ"><h1>ಜಠರ</h1>': 'epaeqAq',
      '<img src="ತೊಡೆ.jpg" alt="ತೊಡೆ" class="ತೊಡೆ"><h1>ತೊಡೆ</h1>': 'tuew',
      '<img src="ಮೊಣಗಂಟು.jpg" alt="ಮೊಣಗಂಟು" class="ಮೊಣಗಂಟು"><h1>ಮೊಣಗಂಟು</h1>': 'emarMpu',
      '<img src="ಕಣಕಾಲು.jpg" alt="ಕಣಕಾಲು" class="ಕಣಕಾಲು"><h1>ಕಣಕಾಲು</h1>': 'EkalAXkarAX',
    };

    const allKeys = Object.keys(mapping);
    let shuffledKeys = shuffleArray([...allKeys]).slice(0, 20);

    let current = 0;
    let correct = 0;

    const flashcardImage = document.getElementById('flashcardImage');
    const letterDiv = document.getElementById('kannadaLetter');
    const optionsDiv = document.getElementById('optionButtons');
    const scoreText = document.getElementById('scoreText');
    const bar = document.getElementById('bar');

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function generateOptions(correctAnswer) {
      const allValues = Object.values(mapping).filter(v => v !== correctAnswer);
      const wrong = shuffleArray(allValues).slice(0, 3);
      return shuffleArray([correctAnswer, ...wrong]);
    }

    function extractImageAndWord(html) {
      const imgMatch = html.match(/<img[^>]+>/);
      const wordMatch = html.match(/<h1>(.*?)<\/h1>/);
      return {
        img: imgMatch ? imgMatch[0] : '',
        word: wordMatch ? wordMatch[1] : '',
      };
    }

    function loadCard() {
      const currentLetter = shuffledKeys[current];
      const correctAnswer = mapping[currentLetter];
      const options = generateOptions(correctAnswer);

      const { img, word } = extractImageAndWord(currentLetter);

      flashcardImage.innerHTML = img;
      letterDiv.textContent = word;
      optionsDiv.innerHTML = '';

      options.forEach(opt => {
        const btn = document.createElement('div');
        btn.className = 'option';
        btn.textContent = opt;
        btn.onclick = () => handleAnswer(opt === correctAnswer, btn, correctAnswer);
        optionsDiv.appendChild(btn);
      });
    }

    function handleAnswer(isCorrect, clickedBtn, correctAnswer) {
      // Disable buttons after click
      const optionButtons = document.querySelectorAll('.option');
      optionButtons.forEach(btn => btn.onclick = null);

      // Highlight selected button
      if (isCorrect) {
        clickedBtn.classList.add('correct');
      } else {
        clickedBtn.classList.add('wrong');
        // Highlight the correct answer among all options
        optionButtons.forEach(btn => {
          if (btn.textContent === correctAnswer) {
            btn.classList.add('correct');
          }
        });
      }

      if (isCorrect) correct++;
      current++;
      scoreText.textContent = `Score: ${correct} / ${current}`;
      bar.style.width = `${(current / shuffledKeys.length) * 100}%`;

      setTimeout(() => {
        if (current < shuffledKeys.length) {
          loadCard();
        } else {
          setTimeout(() => {
            alert(`Finished! Final score: ${correct} / ${shuffledKeys.length}`);
            current = 0;
            correct = 0;
            shuffledKeys = shuffleArray([...allKeys]);
            scoreText.textContent = `Score: 0 / 0`;
            bar.style.width = "0%";
            loadCard();
          }, 200);
        }
      }, 1000); // 1 second highlight
    }

    loadCard();
  </script>
</body>
</html>
